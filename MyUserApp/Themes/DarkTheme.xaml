<!-- File: MyUserApp/Themes/DarkTheme.xaml -->
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <!-- THIS IS THE FIX: This theme now loads the main styles file itself. -->
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Styles.xaml"/>
  </ResourceDictionary.MergedDictionaries>

  <!-- Main Palette -->
  <Color x:Key="PrimaryBackgroundColor">#1E1E28</Color>
  <Color x:Key="SecondaryBackgroundColor">#27293D</Color>
  <Color x:Key="PrimaryAccentColor">#00BFFF</Color>
  <Color x:Key="SecondaryAccentColor">#3D5A80</Color>

  <!-- Text -->
  <Color x:Key="PrimaryTextColor">#F1F1F1</Color>
  <Color x:Key="SecondaryTextColor">#A9A9B3</Color>
  <Color x:Key="HighlightTextColor">#FFFFFF</Color>

  <!-- Borders -->
  <Color x:Key="BorderColor">#3A3C55</Color>
  <Color x:Key="HighlightBorderColor">#4A5A95</Color>

  <!-- Controls -->
  <Color x:Key="ControlBackgroundColor">#2D2D43</Color>
  <Color x:Key="ControlHoverColor">#3E3E55</Color>
  <Color x:Key="ControlPressedColor">#4A5A95</Color>

  <Color x:Key="SuccessColor">#2ECC71</Color>
  <Color x:Key="WarningColor">#F39C12</Color>

  <!-- Brushes -->
  <SolidColorBrush x:Key="PrimaryBackgroundBrush" Color="{StaticResource PrimaryBackgroundColor}"/>
  <SolidColorBrush x:Key="SecondaryBackgroundBrush" Color="{StaticResource SecondaryBackgroundColor}"/>
  <SolidColorBrush x:Key="PrimaryAccentBrush" Color="{StaticResource PrimaryAccentColor}"/>
  <SolidColorBrush x:Key="SecondaryAccentBrush" Color="{StaticResource SecondaryAccentColor}"/>
  <SolidColorBrush x:Key="PrimaryTextBrush" Color="{StaticResource PrimaryTextColor}"/>
  <SolidColorBrush x:Key="SecondaryTextBrush" Color="{StaticResource SecondaryTextColor}"/>
  <SolidColorBrush x:Key="HighlightTextBrush" Color="{StaticResource HighlightTextColor}"/>
  <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>
  <SolidColorBrush x:Key="HighlightBorderBrush" Color="{StaticResource HighlightBorderColor}"/>
  <SolidColorBrush x:Key="ControlBackgroundBrush" Color="{StaticResource ControlBackgroundColor}"/>
  <SolidColorBrush x:Key="ControlHoverBrush" Color="{StaticResource ControlHoverColor}"/>
  <SolidColorBrush x:Key="ControlPressedBrush" Color="{StaticResource ControlPressedColor}"/>
  <SolidColorBrush x:Key="GlyphBrush" Color="{StaticResource PrimaryTextColor}"/>
  <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
  <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}"/>

  <!-- System-level brush overrides for consistent selection appearance -->
  <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="{StaticResource SecondaryAccentColor}"/>
  <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="{StaticResource HighlightTextColor}"/>
  <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{StaticResource SecondaryAccentColor}"/>

</ResourceDictionary>